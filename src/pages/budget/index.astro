---
import { getBudgets } from "lib/server";
import Layout from "../_layout.astro";
import { css } from "css";

const budgets = await getBudgets();
---

<Layout>
	<div
		class={css({
			height: "80vh",
			display: "flex",
			alignItems: "center",
		})}
	>
		<table
			class={css({
				width: "100%",
			})}
		>
			<thead
				class={css({
					backgroundColor: "lime.100",
				})}
			>
				<tr>
					<th class={css({ paddingY: "1rem", paddingLeft: "1rem" })}>분류</th>
					<th>현재</th>
					<th>예산</th>
					<th class={css({ paddingRight: "1rem" })}>잔액</th>
				</tr>
			</thead>
			<tbody
				class={css({
					textAlign: "right",
					"& > * + *": {
						borderTop: "1px solid",
						borderColor: "gray.300",
					},
				})}
			>
				{
					budgets !== undefined
						? budgets.value.map((b) => (
								<tr>
									<td
										class={css({
											textAlign: "left",
											paddingLeft: "1rem",
											paddingY: "1rem",
										})}
									>
										{b.category}
									</td>
									<td>{b.current.toLocaleString()}</td>
									<td>{b.budget.toLocaleString()}</td>
									<td class={css({ paddingRight: "1rem" })}>
										{b.remain.toLocaleString()}
									</td>
								</tr>
							))
						: null
				}
			</tbody>
		</table>
	</div>
</Layout>
